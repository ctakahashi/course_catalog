<% "Search" %>

<p id="notice"><%= notice %></p>

<h1>Listing results</h1>

<table style="margin: 30px;" border="1">
  <thead>
    <tr>
      <th>Id</th>
      <th>Name</th>
      <th>Code</th>
      <th>Subjects</th>
      <th>Description</th>
      <th>Credits</th>
      <th>Independent Study</th>
      <th>Req</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @results.each do |result| %>
      <tr>
        <td><%= result.id %></td>
        <td><%= result.name %></td>
        <td><%= result.code %></td>
        <td><%= result.subjects %></td>
        <td><%= result.description %></td>
        <td><%= result.credits %></td>
        <td><%= result.independent_study %></td>
        <td><%= result.requirements %></td>
        <td><%= link_to 'Show', result %></td>
        <% if (!Enrollment.exists?(user_id: session[:user_id], course_id: result.id)) %>
          <td><%= link_to 'Enroll', enrollments_path(:c_id => result.id, :search_id => @search.id) %> </td>
        <% else %>
          <td><%= link_to 'Unenroll', "enrollment", method: :delete, data: {confirm: "Are you sure?"} %> </td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
